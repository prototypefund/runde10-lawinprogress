<!DOCTYPE html>
<html lang="en">
<head>
  <title>Law In Progress</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="/imgs/favicon-32x32.png">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <img src="imgs/lip_logo.png" alt="Law in Progress" width="300">
  <p>Select a law from {{ name }}:</p>
  <div class="tab">
  {% for law_title, proposal_text in result %}
    <button class="tablinks" onclick="openLaw(event, '{{ law_title }}')" id="defaultOpen">{{ law_title }}</button>
  {% endfor %}
  </div>

  {% for law_title, proposal_text in result %}
    <div id="{{ law_title }}" class="tabcontent">
      <center>
          <button onclick="scrolldiv('back', '{{ law_title }}')">&laquo;</button>
          <button onclick="scrolldiv('top', '{{ law_title }}')">Nach oben</button>
          <button onclick="scrolldiv('forward', '{{ law_title }}')">&raquo;</button>
      </center>
      <div class="scrollable">
      {{ proposal_text|safe }}
      </div>
    </div>
  </div>
  {% endfor %}

<script>
function openLaw(evt, lawTitle) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(lawTitle).style.display = "block";
  evt.currentTarget.className += " active";
}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();
</script>
<script>
    let num = 0;
    
    function scrolldiv(direction, lawTitle) {
    	if (direction === "top"){
    		var elem = document.getElementById(lawTitle + "law-title");
		elem.scrollIntoView();
		num = 0;
    	}
        if (num < 0) {
           num = 0;
        }
        try {
	    	if (direction === "forward"){
		   var elem = document.getElementById(lawTitle + "change-" + num);
		   elem.scrollIntoView();
		   num += 1;
		}
		if (direction === "back" && num > 0){
		   var elem = document.getElementById(lawTitle + "change-" + num);
		   elem.scrollIntoView();
		   num -= 1;
		}
	}
	catch {
		num -= 1;
	}
    }
</script>
</body>
</html> 
